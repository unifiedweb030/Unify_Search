<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unify Search - Multi-Source Search Engine</title>
    <meta name="description" content="Search Wikipedia, DuckDuckGo, Google, and the web with unified results">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîç</text></svg>">
    <style>
        :root {
            --bg: #f8fafc;
            --card: #ffffff;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --muted: #64748b;
            --text: #1e293b;
            --border: #e2e8f0;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --radius: 12px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --glass: rgba(255, 255, 255, 0.8);
            --transition: all 0.2s ease-in-out;
            --wikipedia: #3366cc;
            --duckduckgo: #de5833;
            --google: #4285f4;
        }

        [data-theme="dark"] {
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #60a5fa;
            --accent-hover: #3b82f6;
            --muted: #94a3b8;
            --text: #f1f5f9;
            --border: #334155;
            --glass: rgba(30, 41, 59, 0.8);
            --wikipedia: #5aa0ff;
            --duckduckgo: #ff7b5c;
            --google: #8ab4f8;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            transition: var(--transition);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 1rem 0;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: inherit;
            cursor: pointer;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.25rem;
            transition: var(--transition);
        }

        .logo:hover .logo-icon {
            transform: scale(1.05);
            background: var(--accent-hover);
        }

        .logo-text {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--accent);
        }

        .logo-subtitle {
            font-size: 0.875rem;
            color: var(--muted);
        }

        /* Search Area */
        .search-section {
            padding: 2rem 0;
            text-align: center;
        }

        .search-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .search-box {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
            background: var(--card);
            color: var(--text);
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .search-btn {
            padding: 1rem 1.5rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .search-btn:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        /* Results */
        .results-section {
            display: none;
            margin: 2rem 0;
        }

        .results-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .results-title {
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .results-stats {
            color: var(--muted);
            font-size: 0.875rem;
        }

        .results-container {
            display: grid;
            gap: 1.5rem;
        }

        .result-card {
            background: var(--card);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            transition: var(--transition);
            border-left: 4px solid var(--accent);
        }

        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .result-card.wikipedia {
            border-left-color: var(--wikipedia);
        }

        .result-card.duckduckgo {
            border-left-color: var(--duckduckgo);
        }

        .result-card.google {
            border-left-color: var(--google);
        }

        .result-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .result-title a {
            color: var(--accent);
            text-decoration: none;
        }

        .result-title a:hover {
            text-decoration: underline;
        }

        .result-description {
            color: var(--muted);
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .result-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.75rem;
            color: var(--muted);
        }

        .source-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.7rem;
        }

        .source-wikipedia {
            background: rgba(51, 102, 204, 0.1);
            color: var(--wikipedia);
        }

        .source-duckduckgo {
            background: rgba(222, 88, 51, 0.1);
            color: var(--duckduckgo);
        }

        .source-google {
            background: rgba(66, 133, 244, 0.1);
            color: var(--google);
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .btn {
            background: var(--card);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 0.875rem;
            transition: var(--transition);
        }

        .btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Theme Toggle */
        .theme-toggle {
            background: none;
            border: none;
            color: var(--text);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background: var(--accent);
            color: white;
        }

        /* Source Indicators */
        .sources-indicator {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .source-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--muted);
        }

        .source-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .dot-wikipedia {
            background: var(--wikipedia);
        }

        .dot-duckduckgo {
            background: var(--duckduckgo);
        }

        .dot-google {
            background: var(--google);
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--card);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--accent);
        }

        .modal-text {
            color: var(--text);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .modal-section {
            margin-bottom: 1.5rem;
        }

        .modal-section h3 {
            color: var(--accent);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .feedback-input {
            width: 100%;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--bg);
            color: var(--text);
            font-size: 1rem;
            margin-bottom: 1rem;
            resize: vertical;
            min-height: 120px;
            font-family: inherit;
        }

        .feedback-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }

        /* Footer */
        .footer {
            background: var(--card);
            border-top: 1px solid var(--border);
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
        }

        .footer-link {
            color: var(--muted);
            text-decoration: none;
            font-size: 0.875rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .footer-link:hover {
            color: var(--accent);
        }

        .copyright {
            color: var(--muted);
            font-size: 0.875rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .search-box {
                flex-direction: column;
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
            }

            .footer-links {
                justify-content: center;
            }

            .modal-actions {
                flex-direction: column;
            }

            .modal-content {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body data-theme="light">
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo" onclick="goToHomepage()">
                    <div class="logo-icon">U</div>
                    <div>
                        <div class="logo-text">Unify Search</div>
                        <div class="logo-subtitle">Wikipedia + DuckDuckGo + Google</div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button class="btn" onclick="showFeedbackModal()" style="font-size: 0.75rem;">
                        üí¨ Feedback
                    </button>
                    <button class="theme-toggle" id="themeToggle" title="Toggle theme">
                        <span id="themeIcon">üåô</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Hero Section -->
        <section class="search-section">
            <div class="search-container">
                <h1 style="font-size: 2.5rem; margin-bottom: 1rem; color: var(--accent);">
                    Search Smarter
                </h1>
                <p style="font-size: 1.125rem; color: var(--muted); margin-bottom: 2rem;">
                    Unified results from Wikipedia, DuckDuckGo, and Google
                </p>
                
                <div class="search-box">
                    <input 
                        type="text" 
                        class="search-input" 
                        id="searchInput"
                        placeholder="Search Wikipedia, DuckDuckGo, and Google..."
                        autocomplete="off"
                    >
                    <button class="search-btn" onclick="performSearch()">
                        <span id="searchText">Search</span>
                        <span id="searchLoading" class="loading" style="display: none;"></span>
                    </button>
                </div>
                
                <div class="sources-indicator">
                    <div class="source-indicator">
                        <div class="source-dot dot-wikipedia"></div>
                        <span>Wikipedia</span>
                    </div>
                    <div class="source-indicator">
                        <div class="source-dot dot-duckduckgo"></div>
                        <span>DuckDuckGo</span>
                    </div>
                    <div class="source-indicator">
                        <div class="source-dot dot-google"></div>
                        <span>Google</span>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <button class="btn" onclick="setQuickSearch('artificial intelligence')">
                        ü§ñ AI
                    </button>
                    <button class="btn" onclick="setQuickSearch('machine learning')">
                        üß† ML
                    </button>
                    <button class="btn" onclick="setQuickSearch('climate change')">
                        üåç Climate
                    </button>
                    <button class="btn" onclick="setQuickSearch('space exploration')">
                        üöÄ Space
                    </button>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section class="results-section" id="resultsSection">
            <div class="results-header">
                <h2 class="results-title" id="resultsTitle">Search Results</h2>
                <div class="results-stats" id="resultsStats"></div>
            </div>
            
            <div class="results-container" id="searchResults">
                <!-- Results populated by JavaScript -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a class="footer-link" onclick="showFeedbackModal()">Feedback</a>
                    <a class="footer-link" onclick="showPrivacyModal()">Privacy Policy</a>
                    <a class="footer-link" onclick="showTermsModal()">Terms of Use</a>
                    <a class="footer-link" onclick="showAboutModal()">About</a>
                </div>
                <div class="copyright">
                    &copy; 2024 Unify Search. All rights reserved.
                </div>
            </div>
        </div>
    </footer>

    <!-- Feedback Modal -->
    <div class="modal" id="feedbackModal">
        <div class="modal-content">
            <h2 class="modal-title">Send Feedback</h2>
            <textarea 
                class="feedback-input" 
                id="feedbackMessage" 
                placeholder="What do you think about Unify Search? Suggestions, bugs, or general feedback..."
            ></textarea>
            <input 
                type="email" 
                class="feedback-input" 
                id="feedbackEmail" 
                placeholder="Your email (optional)"
                style="min-height: auto; margin-bottom: 0.5rem;"
            >
            <div style="font-size: 0.875rem; color: var(--muted); margin-bottom: 1rem;">
                Your feedback will be sent directly to the developer
            </div>
            <div class="modal-actions">
                <button class="btn" onclick="hideModal('feedbackModal')">Cancel</button>
                <button class="btn" style="background: var(--accent); color: white;" onclick="sendFeedback()">
                    Send Feedback
                </button>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div class="modal" id="privacyModal">
        <div class="modal-content">
            <h2 class="modal-title">Privacy Policy</h2>
            
            <div class="modal-section">
                <h3>1. Information We Collect</h3>
                <p class="modal-text">
                    Unify Search is committed to protecting your privacy. We do not collect, store, or share any personal information. All searches are performed directly from your browser to the respective search APIs (Wikipedia, DuckDuckGo, Google).
                </p>
            </div>

            <div class="modal-section">
                <h3>2. Data Storage</h3>
                <p class="modal-text">
                    The only data stored locally in your browser includes:
                    - Search preferences (theme selection)
                    - Favorite search results
                    - Search history (optional)
                    This data never leaves your device and can be cleared at any time by clearing your browser storage.
                </p>
            </div>

            <div class="modal-section">
                <h3>3. Third-Party Services</h3>
                <p class="modal-text">
                    We integrate with:
                    - Wikipedia API (public data)
                    - DuckDuckGo API (anonymous searches)
                    - Google Custom Search API
                    Each service has its own privacy policy. We recommend reviewing their terms.
                </p>
            </div>

            <div class="modal-section">
                <h3>4. Cookies</h3>
                <p class="modal-text">
                    We do not use tracking cookies. Any cookies used are for essential functionality and are stored locally on your device.
                </p>
            </div>

            <div class="modal-section">
                <h3>5. Your Rights</h3>
                <p class="modal-text">
                    You have the right to:
                    - Clear all locally stored data
                    - Disable features that store data
                    - Use the service anonymously
                </p>
            </div>

            <div class="modal-actions">
                <button class="btn" style="background: var(--accent); color: white;" onclick="hideModal('privacyModal')">
                    I Understand
                </button>
            </div>
        </div>
    </div>

    <!-- Terms of Use Modal -->
    <div class="modal" id="termsModal">
        <div class="modal-content">
            <h2 class="modal-title">Terms of Use</h2>
            
            <div class="modal-section">
                <h3>1. Acceptance of Terms</h3>
                <p class="modal-text">
                    By using Unify Search, you agree to these terms of use. If you disagree with any part, please discontinue use immediately.
                </p>
            </div>

            <div class="modal-section">
                <h3>2. Service Description</h3>
                <p class="modal-text">
                    Unify Search is a meta-search engine that combines results from Wikipedia, DuckDuckGo, and Google. We provide the service "as is" without warranties.
                </p>
            </div>

            <div class="modal-section">
                <h3>3. User Responsibilities</h3>
                <p class="modal-text">
                    You agree to:
                    - Use the service lawfully
                    - Respect intellectual property rights
                    - Not abuse or overload the service
                    - Comply with all applicable laws
                </p>
            </div>

            <div class="modal-section">
                <h3>4. Intellectual Property</h3>
                <p class="modal-text">
                    The Unify Search interface is our property. Search results belong to their respective sources. You may not copy, modify, or distribute our interface without permission.
                </p>
            </div>

            <div class="modal-section">
                <h3>5. Limitation of Liability</h3>
                <p class="modal-text">
                    We are not liable for:
                    - Search result accuracy
                    - Third-party content
                    - Service interruptions
                    - Data loss
                    - Any damages from service use
                </p>
            </div>

            <div class="modal-section">
                <h3>6. Modifications</h3>
                <p class="modal-text">
                    We may update these terms at any time. Continued use constitutes acceptance of changes.
                </p>
            </div>

            <div class="modal-actions">
                <button class="btn" style="background: var(--accent); color: white;" onclick="hideModal('termsModal')">
                    I Agree
                </button>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="aboutModal">
        <div class="modal-content">
            <h2 class="modal-title">About Unify Search</h2>
            
            <div class="modal-section">
                <h3>Our Mission</h3>
                <p class="modal-text">
                    Unify Search combines the best of multiple search engines into one clean, privacy-focused interface. Get comprehensive results from Wikipedia's knowledge, DuckDuckGo's privacy, and Google's reach.
                </p>
            </div>

            <div class="modal-section">
                <h3>Features</h3>
                <p class="modal-text">
                    ‚Ä¢ Multi-source search results<br>
                    ‚Ä¢ Dark/Light theme support<br>
                    ‚Ä¢ No tracking or data collection<br>
                    ‚Ä¢ Fast, responsive design<br>
                    ‚Ä¢ Save favorites locally<br>
                    ‚Ä¢ Privacy-focused
                </p>
            </div>

            <div class="modal-section">
                <h3>Technology</h3>
                <p class="modal-text">
                    Built with modern web technologies. Entirely client-side - your searches stay with you. Open and transparent.
                </p>
            </div>

            <div class="modal-section">
                <h3>Contact</h3>
                <p class="modal-text">
                    Have questions or feedback? Use the feedback form to reach us directly at unifiedweb30@gmail.com
                </p>
            </div>

            <div class="modal-actions">
                <button class="btn" style="background: var(--accent); color: white;" onclick="hideModal('aboutModal')">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // ‚úÖ YOUR REAL GOOGLE API CREDENTIALS
        const GOOGLE_API_KEY = "AIzaSyD3EoJFofNm5qoVMG1c3Xm63I4yELILCDQ";
        const GOOGLE_CX = "f779aaeb570074a92";

        // ‚úÖ YOUR EMAIL FOR FEEDBACK
        const DEVELOPER_EMAIL = "unifiedweb30@gmail.com";

        // State management
        const state = {
            currentQuery: '',
            searchResults: [],
            isLoading: false,
            theme: 'light'
        };

        // DOM elements
        const elements = {
            searchInput: document.getElementById('searchInput'),
            searchText: document.getElementById('searchText'),
            searchLoading: document.getElementById('searchLoading'),
            resultsSection: document.getElementById('resultsSection'),
            resultsTitle: document.getElementById('resultsTitle'),
            resultsStats: document.getElementById('resultsStats'),
            searchResults: document.getElementById('searchResults'),
            themeToggle: document.getElementById('themeToggle'),
            themeIcon: document.getElementById('themeIcon'),
            feedbackModal: document.getElementById('feedbackModal'),
            feedbackMessage: document.getElementById('feedbackMessage'),
            feedbackEmail: document.getElementById('feedbackEmail'),
            privacyModal: document.getElementById('privacyModal'),
            termsModal: document.getElementById('termsModal'),
            aboutModal: document.getElementById('aboutModal')
        };

        // Initialize application
        function init() {
            loadUserPreferences();
            initEventListeners();
            checkUrlParams();
        }

        // Load user preferences from localStorage
        function loadUserPreferences() {
            const savedTheme = localStorage.getItem('unify-theme');
            
            if (savedTheme) {
                setTheme(savedTheme);
            } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                setTheme('dark');
            }
        }

        // Initialize event listeners
        function initEventListeners() {
            // Search on Enter key
            elements.searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            // Theme toggle
            elements.themeToggle.addEventListener('click', toggleTheme);

            // Close modals when clicking outside
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        hideModal(modal.id);
                    }
                });
            });

            // Close modals with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    hideAllModals();
                }
            });
        }

        // Theme management
        function setTheme(theme) {
            state.theme = theme;
            document.body.setAttribute('data-theme', theme);
            elements.themeIcon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('unify-theme', theme);
        }

        function toggleTheme() {
            const newTheme = state.theme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        // Modal Functions
        function showFeedbackModal() {
            showModal('feedbackModal');
            elements.feedbackMessage.focus();
        }

        function showPrivacyModal() {
            showModal('privacyModal');
        }

        function showTermsModal() {
            showModal('termsModal');
        }

        function showAboutModal() {
            showModal('aboutModal');
        }

        function showModal(modalId) {
            hideAllModals();
            document.getElementById(modalId).classList.add('show');
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
            
            // Clear feedback form when hiding
            if (modalId === 'feedbackModal') {
                elements.feedbackMessage.value = '';
                elements.feedbackEmail.value = '';
            }
        }

        function hideAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('show');
            });
        }

        // Send Feedback Function using FormSubmit.co
        async function sendFeedback() {
            const message = elements.feedbackMessage.value.trim();
            const email = elements.feedbackEmail.value.trim();

            if (!message) {
                alert('Please enter your feedback message');
                return;
            }

            const sendButton = event.target;
            const originalText = sendButton.textContent;
            
            // Show loading state
            sendButton.textContent = 'Sending...';
            sendButton.disabled = true;

            try {
                const response = await fetch('https://formsubmit.co/ajax/' + DEVELOPER_EMAIL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        name: email ? `User (${email})` : 'Anonymous User',
                        email: email || 'anonymous@unifysearch.com',
                        message: message,
                        subject: 'Unify Search Feedback',
                        _subject: 'New Feedback - Unify Search',
                        _captcha: 'false',
                        _template: 'table',
                        _url: window.location.href
                    })
                });

                if (response.ok) {
                    alert('Thank you for your feedback! Your message has been sent to ' + DEVELOPER_EMAIL);
                    hideModal('feedbackModal');
                } else {
                    throw new Error('Failed to send feedback');
                }
            } catch (error) {
                console.error('Feedback error:', error);
                alert('Sorry, there was an error sending your feedback. Please try again later.');
            } finally {
                // Restore button state
                sendButton.textContent = originalText;
                sendButton.disabled = false;
            }
        }

        // Main search function
        async function performSearch() {
            const query = elements.searchInput.value.trim();
            if (!query) return;

            state.currentQuery = query;
            state.isLoading = true;

            // Update UI
            elements.searchText.style.display = 'none';
            elements.searchLoading.style.display = 'inline-block';
            elements.resultsSection.style.display = 'block';
            elements.resultsTitle.textContent = `Results for "${query}"`;
            elements.resultsStats.textContent = 'Searching Wikipedia, DuckDuckGo, and Google...';
            elements.searchResults.innerHTML = '<div class="result-card">Searching... Please wait.</div>';

            // Update URL
            updateUrl(query);

            try {
                // Execute all searches in parallel
                const [wikipediaResults, duckduckgoResults, googleResults] = await Promise.allSettled([
                    searchWikipedia(query),
                    searchDuckDuckGo(query),
                    searchGoogle(query)
                ]);

                // Process results
                state.searchResults = [
                    ...(wikipediaResults.status === 'fulfilled' ? wikipediaResults.value : []),
                    ...(duckduckgoResults.status === 'fulfilled' ? duckduckgoResults.value : []),
                    ...(googleResults.status === 'fulfilled' ? googleResults.value : [])
                ];

                displayResults();
                
            } catch (error) {
                console.error('Search error:', error);
                elements.searchResults.innerHTML = 
                    '<div class="result-card">Error performing search. Please try again.</div>';
            } finally {
                state.isLoading = false;
                elements.searchText.style.display = 'inline';
                elements.searchLoading.style.display = 'none';
            }
        }

        // Wikipedia search
        async function searchWikipedia(query) {
            try {
                const summaryResponse = await fetch(
                    `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`,
                    { 
                        method: 'GET',
                        headers: {
                            'User-Agent': 'UnifySearch/1.0'
                        }
                    }
                );
                
                if (summaryResponse.ok) {
                    const pageData = await summaryResponse.json();
                    return [{
                        title: pageData.title,
                        url: pageData.content_urls.desktop.page,
                        description: pageData.extract,
                        source: 'wikipedia',
                        type: 'encyclopedia'
                    }];
                }

                // Fallback to search
                const searchUrl = `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(query)}&format=json&origin=*&srlimit=3`;
                const searchResponse = await fetch(searchUrl);
                const searchData = await searchResponse.json();

                return searchData.query.search.map(result => ({
                    title: result.title,
                    url: `https://en.wikipedia.org/wiki/${result.title.replace(/ /g, '_')}`,
                    description: result.snippet.replace(/<[^>]*>/g, '') + '...',
                    source: 'wikipedia',
                    type: 'encyclopedia'
                }));

            } catch (error) {
                console.error('Wikipedia search error:', error);
                return [];
            }
        }

        // DuckDuckGo search
        async function searchDuckDuckGo(query) {
            try {
                const response = await fetch(
                    `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_html=1&skip_disambig=1`,
                    {
                        method: 'GET',
                        headers: {
                            'User-Agent': 'UnifySearch/1.0'
                        }
                    }
                );
                
                const data = await response.json();
                const results = [];

                // Instant Answer
                if (data.Abstract) {
                    results.push({
                        title: data.Heading || query,
                        url: data.AbstractURL || `https://duckduckgo.com/?q=${encodeURIComponent(query)}`,
                        description: data.Abstract,
                        source: 'duckduckgo',
                        type: 'instant_answer'
                    });
                }

                // Related Topics
                if (data.RelatedTopics) {
                    data.RelatedTopics.slice(0, 3).forEach(topic => {
                        if (topic.FirstURL && topic.Text) {
                            results.push({
                                title: topic.Text.split(' - ')[0],
                                url: topic.FirstURL,
                                description: topic.Text,
                                source: 'duckduckgo',
                                type: 'related_topic'
                            });
                        }
                    });
                }

                return results;
                
            } catch (error) {
                console.error('DuckDuckGo search error:', error);
                return [];
            }
        }

        // Google Custom Search API - USING YOUR REAL CREDENTIALS
        async function searchGoogle(query) {
            try {
                const response = await fetch(
                    `https://www.googleapis.com/customsearch/v1?key=${GOOGLE_API_KEY}&cx=${GOOGLE_CX}&q=${encodeURIComponent(query)}&num=8`
                );

                if (!response.ok) {
                    throw new Error(`Google API error: ${response.status}`);
                }

                const data = await response.json();

                return data.items?.map(item => ({
                    title: item.title,
                    url: item.link,
                    description: item.snippet,
                    source: 'google',
                    type: 'web',
                    displayLink: item.displayLink
                })) || [];

            } catch (error) {
                console.error('Google search error:', error);
                return [];
            }
        }

        // Display results
        function displayResults() {
            const results = state.searchResults;
            const totalResults = results.length;
            const googleResults = results.filter(r => r.source === 'google').length;
            const wikipediaResults = results.filter(r => r.source === 'wikipedia').length;
            const duckduckgoResults = results.filter(r => r.source === 'duckduckgo').length;
            
            elements.resultsStats.textContent = 
                `Found ${totalResults} results (${wikipediaResults} Wikipedia, ${duckduckgoResults} DuckDuckGo, ${googleResults} Google)`;
            
            if (totalResults === 0) {
                elements.searchResults.innerHTML = 
                    '<div class="result-card">No results found. Try a different search term.</div>';
                return;
            }

            elements.searchResults.innerHTML = '';
            
            results.forEach((result, index) => {
                const resultElement = document.createElement('div');
                resultElement.className = `result-card ${result.source}`;
                
                resultElement.innerHTML = `
                    <div class="result-title">
                        <a href="${result.url}" target="_blank" rel="noopener">
                            ${result.title}
                        </a>
                    </div>
                    <div class="result-description">
                        ${result.description}
                    </div>
                    <div class="result-meta">
                        <div>
                            <span class="source-badge source-${result.source}">
                                ${result.source.toUpperCase()}
                            </span>
                            <span style="margin-left: 0.5rem;">${result.type}</span>
                            ${result.displayLink ? `<span style="margin-left: 0.5rem;">‚Ä¢ ${result.displayLink}</span>` : ''}
                        </div>
                        <button class="btn" onclick="saveToFavorites(${index})" style="padding: 0.25rem 0.5rem; font-size: 0.7rem;">
                            ‚≠ê Save
                        </button>
                    </div>
                `;
                
                elements.searchResults.appendChild(resultElement);
            });
        }

        // Quick search buttons
        function setQuickSearch(query) {
            elements.searchInput.value = query;
            elements.searchInput.focus();
        }

        // URL management
        function updateUrl(query) {
            const url = new URL(window.location);
            url.searchParams.set('q', query);
            window.history.pushState({}, '', url);
        }

        function checkUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('q');
            if (query) {
                elements.searchInput.value = query;
                performSearch();
            }
        }

        // Navigation
        function goToHomepage() {
            elements.searchInput.value = '';
            elements.resultsSection.style.display = 'none';
            window.history.pushState({}, '', window.location.pathname);
            elements.searchInput.focus();
        }

        // Save to favorites
        function saveToFavorites(index) {
            const result = state.searchResults[index];
            if (result) {
                const favorites = JSON.parse(localStorage.getItem('unify-favorites') || '[]');
                favorites.push({
                    ...result,
                    savedAt: new Date().toISOString()
                });
                localStorage.setItem('unify-favorites', JSON.stringify(favorites));
                
                // Show confirmation
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úì Saved!';
                btn.style.background = 'var(--success)';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 2000);
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);

        // Handle browser back/forward buttons
        window.addEventListener('popstate', checkUrlParams);
    </script>
</body>
</html>